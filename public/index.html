<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FCI TERMINAL | Real-time Investment Explorer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="glow-bg"></div>

  <div class="app-wrapper" id="app-wrapper">
    <main class="main-content">
      <header>
        <div style="display: flex; justify-content: space-between; align-items: baseline;">
          <div>
            <h1>FCI Terminal</h1>
            <p>SYSTEM.INV_EXPLORER v2.5 // ARG_MARKETS</p>
          </div>
          <div class="nav-tabs">
            <button id="tab-terminal" class="nav-tab active" onclick="switchView('terminal')">TERMINAL_VIEW</button>
            <button id="tab-management" class="nav-tab" onclick="switchView('management')">MGMT_PANEL</button>
          </div>
        </div>
      </header>

      <!-- MAIN TERMINAL VIEW -->
      <div id="view-terminal">
        <!-- Advanced Search -->
        <div class="search-section">
          <span class="search-icon">üîé</span>
          <input type="text" id="search" placeholder="Buscar por nombre, gestora o c√≥digo CNV...">
        </div>

        <!-- Logic Filters -->
        <div class="filters-bar">
          <div class="filter-chip">
            <span>STAT:</span>
            <select id="estado">
              <option value="">TODOS</option>
              <option value="1">ACTIVO</option>
              <option value="0">INACTIVO</option>
            </select>
          </div>
          <div class="filter-chip">
            <span>CURR:</span>
            <select id="moneda">
              <option value="">TODOS</option>
              <option value="1">ARS</option>
              <option value="2">USD</option>
              <option value="3">EUR</option>
            </select>
          </div>
          <div class="filter-chip">
            <span>TIME:</span>
            <select id="horizonte">
              <option value="">TODOS</option>
              <option value="Corto Plazo">SHORT</option>
              <option value="Mediano Plazo">MID</option>
              <option value="Largo Plazo">LONG</option>
            </select>
          </div>
          <div class="filter-chip">
            <span>TYPE:</span>
            <select id="tipoRenta">
              <option value="">TODOS</option>
              <option value="4">MONEY MKT</option>
              <option value="3">FIXED INC</option>
              <option value="2">EQUITY</option>
              <option value="5">MIXED</option>
            </select>
          </div>
          <div class="filter-chip">
            <span>RISK:</span>
            <select id="riesgo">
              <option value="">TODOS</option>
              <option value="bajo">LOW</option>
              <option value="medio">MID</option>
              <option value="alto">HIGH</option>
            </select>
          </div>
          <div class="filter-chip fav-chip" id="fav-filter-btn" onclick="toggleFavsOnly()">
            <span>FAVS:</span>
            <span class="fav-icon">‚ù§</span>
          </div>

          <!-- Modern Interactive Grid -->
          <div class="grid-header">
            <div class="sortable-header" data-sort="id">UID <span class="sort-indicator"></span></div>
            <div class="sortable-header" data-sort="nombre">INSTRUMENT_NAME <span class="sort-indicator"></span></div>
            <div class="sortable-header" data-sort="tipo">ASSET_CLASS <span class="sort-indicator"></span></div>
            <div class="sortable-header" data-sort="fid">FID <span class="sort-indicator"></span></div>
            <div class="sortable-header" data-sort="riesgo">RISK_LVL <span class="sort-indicator"></span></div>
            <div class="sortable-header" data-sort="moneda">CURR <span class="sort-indicator"></span></div>
            <div class="sortable-header" data-sort="minimo">MIN_ALLOC <span class="sort-indicator"></span></div>
            <div class="sortable-header" data-sort="status">STATUS <span class="sort-indicator"></span></div>
          </div>

          <div id="funds-list">
            <!-- Rows injected via app.js -->
          </div>

          <div class="pagination-footer">
            <div id="count">0 INSTRUMENTS FOUND</div>
            <div class="pagination-controls">
              <button id="prev-btn" class="nav-btn">PREV_PAGE</button>
              <span id="page-info">PAGE 01 / 01</span>
              <button id="next-btn" class="nav-btn">NEXT_PAGE</button>
            </div>
          </div>
        </div>
      </div>

      <!-- NEW MANAGEMENT VIEW -->
      <div id="view-management" class="hidden">
        <div class="mgmt-grid">
          <div class="kpi-row">
            <div class="stat-card glass glow-emerald">
              <span class="label">AVG_MARKET_LIQUIDITY</span>
              <span class="value" id="mgmt-liquidity">0%</span>
            </div>
            <div class="stat-card glass glow-gold" style="position: relative; cursor: pointer;"
              title="Activo individual con mayor peso total agregado entre todos los fondos del pa√≠s. Click para ver todos los fondos que lo contienen."
              onclick="showDominantAssetDetails()">
              <span class="label">DOMINANT_ASSET</span>
              <span class="value" id="mgmt-top-asset">---</span>
              <div style="position: absolute; top: 1rem; right: 1rem; font-size: 0.7rem; opacity: 0.5;">üîç</div>
            </div>
            <div class="stat-card glass">
              <span class="label">ANALYSED_FUNDS</span>
              <span class="value" id="mgmt-mgr-count">0</span>
            </div>
          </div>

          <div class="main-mgmt-content">
            <div class="mgmt-panel glass">
              <h3 class="panel-title">TOP_ASSETS_RANKING</h3>
              <div class="tabs-mini">
                <button onclick="changeAssetRanking('freq')" class="active" id="btn-rank-freq">BY_FREQUENCY</button>
                <button onclick="changeAssetRanking('weight')" id="btn-rank-weight">BY_WEIGHT</button>
              </div>
              <div id="asset-ranking-list" class="ranking-list"></div>
            </div>
            <div class="mgmt-panel glass">
              <h3 class="panel-title">MANAGER_BENCHMARK</h3>
              <div id="manager-list" class="mgr-list"></div>
            </div>
          </div>

          <!-- Investment Opportunities Section -->
          <div class="mgmt-panel glass full-width"
            style="background: rgba(16, 185, 129, 0.03); border-color: rgba(16, 185, 129, 0.2);">
            <h3 class="panel-title" style="color: var(--primary);">üéØ TOP_10_INVESTMENT_OPPORTUNITIES</h3>
            <div class="disclaimer-box">
              <span class="disclaimer-icon">‚ö†Ô∏è</span>
              <p class="disclaimer-text">
                <strong>DISCLAIMER:</strong> Esta lista NO es una recomendaci√≥n de compra.
                Refleja √∫nicamente los activos con mayor concentraci√≥n de capital agregado entre todos los fondos del
                pa√≠s.
                Es un indicador de "consenso de mercado" entre gestores profesionales.
              </p>
            </div>
            <div id="investment-opportunities" class="opportunities-grid"></div>
          </div>

          <div class="mgmt-panel glass full-width">
            <h3 class="panel-title">ASSET_REVERSE_LOOKUP_ENGINE</h3>
            <div class="explorer-search">
              <input type="text" id="asset-search" placeholder="SEARCH_ALL_ASSETS_IN_COUNTRY..."
                oninput="handleAssetSearch()">
            </div>
            <div id="asset-explorer-results" class="explorer-grid"></div>
          </div>
        </div>
      </div>
    </main>

    <!-- Innovative Side Panel -->
    <aside id="side-panel">
      <button class="sidebar-close" onclick="closeSidebar()">‚úï</button>
      <div class="sidebar-header" id="sidebar-header">
        <!-- Dyn Header -->
      </div>
      <div class="sidebar-body" id="sidebar-body">
        <!-- Dyn Content -->
      </div>
    </aside>
  </div>

  <script src="app.js"></script>
</body>

</html>